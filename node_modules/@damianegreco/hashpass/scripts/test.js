const { generarToken, verificarToken } = require('../index');
const TIPO_TEST = process.argv[2] //tipo de test

const tokenSecret = 'asd123asd'

const testNewToken = function(){
  const user = {
    usuario_id: 1,
    usuario: "asd"
  }
  
  const token = generarToken(tokenSecret, 3, user)
  
  console.log(token);
}

const testCheckToken = function(){
  const jwt = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MjU1OTIwMzYsImRhdGEiOnsidXN1YXJpb19pZCI6MSwidXN1YXJpbyI6ImFzZCJ9LCJpYXQiOjE3MjU1ODEyMzZ9.WA9nfKBPi_tEfRg3YsFg4rLd30S3dWORZOvnjBQWHOE"

  const verficacion = verificarToken(jwt, tokenSecret);

  console.log(verficacion);
}

if (TIPO_TEST === "generar"){
  testNewToken();
} else if (TIPO_TEST === "verificar"){
  testCheckToken();
} else {
  console.error("Tipo de test incorrecto, ingrese 'generar' o 'verificar'. npm run dev [TIPO_TEST]");
}

